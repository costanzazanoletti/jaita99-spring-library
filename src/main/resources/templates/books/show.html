<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/resources :: head('Book Details')"></head>
<body>
<nav th:replace="fragments/navbar :: topNavbar('books')"></nav>
<!-- Attributi: book(Book) -->
<main class="container">
  <!-- section dettagli Book --->
  <section>
    <h1 th:text="${book.title}"></h1>
    <h2 th:text="${book.authors}"></h2>
    <hr>
    <p>Publisher: <span th:text="${book.publisher}"></span></p>
    <p>Year: <span th:text="${book.year}"></span></p>
    <p>ISBN: <span th:text="${book.isbn}"></span></p>
    <p>Number of copies: <span th:text="${book.numberOfCopies}"></span></p>
    <p>Number of available copies: <span th:text="${book.availableCopies}"></span></p>
    <h4>Synopsis</h4>
    <p th:text="${book.synopsis}"></p>
    <div class="mt-3">
      <a th:href="@{/books}" class="btn btn-primary">
        <i class="fa-solid fa-arrow-left"></i>Back to list
      </a>
    </div>
  </section>
  <!-- section tabela Borrowings --->
  <section class="mt-5">
    <h3>
      <span>Borrowings</span>
      <!-- /borrowings/create?bookId=2 -->
      <a th:href="@{/borrowings/create(bookId=${book.id})}" class="btn btn-primary">+</a>
    </h3>
    <table class="table" th:if="${book.borrowings.size() > 0}">
      <thead>
      <tr>
        <th>Start Date</th>
        <th>Expire Date</th>
        <th>Return Date</th>
        <th>Note</th>
      </tr>
      </thead>
      <tbody>
      <tr th:each="brw : ${book.borrowings}">
        <td th:text="${brw.startDate}"></td>
        <td th:text="${brw.expireDate}"></td>
        <td th:text="${brw.returnDate}"></td>
        <td th:text="${brw.note}"></td>
      </tr>
      </tbody>
    </table>
    <div class="alert alert-info" th:if="${book.borrowings.size() == 0}">
      This book has not been borrowed yet
    </div>
  </section>
</main>
<th:block th:replace="fragments/resources :: script"></th:block>
</body>
</html>